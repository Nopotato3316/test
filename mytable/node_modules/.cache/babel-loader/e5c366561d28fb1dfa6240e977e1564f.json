{"remainingRequest":"C:\\Users\\ren\\Desktop\\test\\mytable\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\ren\\Desktop\\test\\mytable\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ren\\Desktop\\test\\mytable\\src\\components\\mytinymce\\plugins\\image\\plugin.min.js","dependencies":[{"path":"C:\\Users\\ren\\Desktop\\test\\mytable\\src\\components\\mytinymce\\plugins\\image\\plugin.min.js","mtime":1633891664000},{"path":"C:\\Users\\ren\\Desktop\\test\\mytable\\babel.config.js","mtime":1634872674031},{"path":"C:\\Users\\ren\\Desktop\\test\\mytable\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ren\\Desktop\\test\\mytable\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ren\\Desktop\\test\\mytable\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCJDOi9Vc2Vycy9yZW4vRGVza3RvcC90ZXN0L215dGFibGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikuZGVmYXVsdDsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CgovKioKICogQ29weXJpZ2h0IChjKSBUaW55IFRlY2hub2xvZ2llcywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgTEdQTCBvciBhIGNvbW1lcmNpYWwgbGljZW5zZS4KICogRm9yIExHUEwgc2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uCiAqIEZvciBjb21tZXJjaWFsIGxpY2Vuc2VzIHNlZSBodHRwczovL3d3dy50aW55LmNsb3VkLwogKgogKiBWZXJzaW9uOiA1LjEwLjAgKDIwMjEtMTAtMTEpCiAqLwohZnVuY3Rpb24gKCkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gZShyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG4gPSBfdHlwZW9mKHQgPSBlKSwgKG51bGwgPT09IHQgPyAibnVsbCIgOiAib2JqZWN0IiA9PSBuICYmIChBcnJheS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSB8fCB0LmNvbnN0cnVjdG9yICYmICJBcnJheSIgPT09IHQuY29uc3RydWN0b3IubmFtZSkgPyAiYXJyYXkiIDogIm9iamVjdCIgPT0gbiAmJiAoU3RyaW5nLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpIHx8IHQuY29uc3RydWN0b3IgJiYgIlN0cmluZyIgPT09IHQuY29uc3RydWN0b3IubmFtZSkgPyAic3RyaW5nIiA6IG4pID09PSByOwogICAgICB2YXIgdCwgbjsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB0KHQpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3R5cGVvZihlKSA9PT0gdDsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBEKGUpIHsKICAgIHJldHVybiAhKG51bGwgPT0gZSk7CiAgfQoKICBmdW5jdGlvbiBsKCkge30KCiAgZnVuY3Rpb24gYShlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBuKGUpIHsKICAgIHJldHVybiBlOwogIH0KCiAgZnVuY3Rpb24gcigpIHsKICAgIHJldHVybiBnOwogIH0KCiAgdmFyIGksCiAgICAgIG8gPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS5QbHVnaW5NYW5hZ2VyIiksCiAgICAgIF92ID0gZnVuY3Rpb24gdigpIHsKICAgIHJldHVybiAoX3YgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIChlKSB7CiAgICAgIGZvciAodmFyIHQsIG4gPSAxLCByID0gYXJndW1lbnRzLmxlbmd0aDsgbiA8IHI7IG4rKykgewogICAgICAgIGZvciAodmFyIGkgaW4gdCA9IGFyZ3VtZW50c1tuXSkgewogICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGkpICYmIChlW2ldID0gdFtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZTsKICAgIH0pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSwKICAgICAgVCA9IGUoInN0cmluZyIpLAogICAgICBzID0gZSgib2JqZWN0IiksCiAgICAgIGMgPSBlKCJhcnJheSIpLAogICAgICBOID0gdCgiYm9vbGVhbiIpLAogICAgICB3ID0gdCgiZnVuY3Rpb24iKSwKICAgICAgdSA9IHQoIm51bWJlciIpLAogICAgICBtID0gYSghMSksCiAgICAgIGQgPSBhKCEoaSA9IG51bGwpKSwKICAgICAgZyA9IHsKICAgIGZvbGQ6IGZ1bmN0aW9uIGZvbGQoZSwgdCkgewogICAgICByZXR1cm4gZSgpOwogICAgfSwKICAgIGlzU29tZTogbSwKICAgIGlzTm9uZTogZCwKICAgIGdldE9yOiBuLAogICAgZ2V0T3JUaHVuazogcCwKICAgIGdldE9yRGllOiBmdW5jdGlvbiBnZXRPckRpZShlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihlIHx8ICJlcnJvcjogZ2V0T3JEaWUgY2FsbGVkIG9uIG5vbmUuIik7CiAgICB9LAogICAgZ2V0T3JOdWxsOiBhKG51bGwpLAogICAgZ2V0T3JVbmRlZmluZWQ6IGEodm9pZCAwKSwKICAgIG9yOiBuLAogICAgb3JUaHVuazogcCwKICAgIG1hcDogciwKICAgIGVhY2g6IGwsCiAgICBiaW5kOiByLAogICAgZXhpc3RzOiBtLAogICAgZm9yYWxsOiBkLAogICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoKSB7CiAgICAgIHJldHVybiBnOwogICAgfSwKICAgIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0sCiAgICB0b1N0cmluZzogYSgibm9uZSgpIikKICB9OwoKICBmdW5jdGlvbiBwKGUpIHsKICAgIHJldHVybiBlKCk7CiAgfQoKICBmdW5jdGlvbiBmKGUsIGEsIG8sIGwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICBmb3IgKHZhciB0ID0geShlKSwgbiA9IDAsIHIgPSB0Lmxlbmd0aDsgbiA8IHI7IG4rKykgewogICAgICAgIHZhciBpID0gdFtuXTsKICAgICAgICAhZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIChhKGUsIHQpID8gbyA6IGwpKGUsIHQpOwogICAgICAgIH0oZVtpXSwgaSk7CiAgICAgIH0KICAgIH0oZSksIDE7CiAgfQoKICBmdW5jdGlvbiBoKGUsIHQpIHsKICAgIHJldHVybiBBLmNhbGwoZSwgdCk7CiAgfQoKICBmdW5jdGlvbiBTKGUpIHsKICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDAsIHIgPSBlLmxlbmd0aDsgbiA8IHI7ICsrbikgewogICAgICBpZiAoIWMoZVtuXSkpIHRocm93IG5ldyBFcnJvcigiQXJyLmZsYXR0ZW4gaXRlbSAiICsgbiArICIgd2FzIG5vdCBhbiBhcnJheSwgaW5wdXQ6ICIgKyBlKTsKICAgICAgVS5hcHBseSh0LCBlW25dKTsKICAgIH0KCiAgICByZXR1cm4gdDsKICB9CgogIHZhciBiID0gZnVuY3Rpb24gYihuKSB7CiAgICBmdW5jdGlvbiBlKCkgewogICAgICByZXR1cm4gaTsKICAgIH0KCiAgICBmdW5jdGlvbiB0KGUpIHsKICAgICAgcmV0dXJuIGUobik7CiAgICB9CgogICAgdmFyIHIgPSBhKG4pLAogICAgICAgIGkgPSB7CiAgICAgIGZvbGQ6IGZ1bmN0aW9uIGZvbGQoZSwgdCkgewogICAgICAgIHJldHVybiB0KG4pOwogICAgICB9LAogICAgICBpc1NvbWU6IGQsCiAgICAgIGlzTm9uZTogbSwKICAgICAgZ2V0T3I6IHIsCiAgICAgIGdldE9yVGh1bms6IHIsCiAgICAgIGdldE9yRGllOiByLAogICAgICBnZXRPck51bGw6IHIsCiAgICAgIGdldE9yVW5kZWZpbmVkOiByLAogICAgICBvcjogZSwKICAgICAgb3JUaHVuazogZSwKICAgICAgbWFwOiBmdW5jdGlvbiBtYXAoZSkgewogICAgICAgIHJldHVybiBiKGUobikpOwogICAgICB9LAogICAgICBlYWNoOiBmdW5jdGlvbiBlYWNoKGUpIHsKICAgICAgICBlKG4pOwogICAgICB9LAogICAgICBiaW5kOiB0LAogICAgICBleGlzdHM6IHQsCiAgICAgIGZvcmFsbDogdCwKICAgICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoZSkgewogICAgICAgIHJldHVybiBlKG4pID8gaSA6IGc7CiAgICAgIH0sCiAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7CiAgICAgICAgcmV0dXJuIFtuXTsKICAgICAgfSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiAic29tZSgiICsgbiArICIpIjsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBpOwogIH0sCiAgICAgIEwgPSB7CiAgICBzb21lOiBiLAogICAgbm9uZTogciwKICAgIGZyb206IGZ1bmN0aW9uIGZyb20oZSkgewogICAgICByZXR1cm4gbnVsbCA9PSBlID8gZyA6IGIoZSk7CiAgICB9CiAgfSwKICAgICAgeSA9IE9iamVjdC5rZXlzLAogICAgICBBID0gT2JqZWN0Lmhhc093blByb3BlcnR5LAogICAgICBVID0gQXJyYXkucHJvdG90eXBlLnB1c2g7CgogIGZ1bmN0aW9uIEkoZSwgdCwgbikgewogICAgIWZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIGlmICghKFQobikgfHwgTihuKSB8fCB1KG4pKSkgdGhyb3cgY29uc29sZS5lcnJvcigiSW52YWxpZCBjYWxsIHRvIEF0dHJpYnV0ZS5zZXQuIEtleSAiLCB0LCAiOjogVmFsdWUgIiwgbiwgIjo6IEVsZW1lbnQgIiwgZSksIG5ldyBFcnJvcigiQXR0cmlidXRlIHZhbHVlIHdhcyBub3Qgc2ltcGxlIik7CiAgICAgIGUuc2V0QXR0cmlidXRlKHQsIG4gKyAiIik7CiAgICB9KGUuZG9tLCB0LCBuKTsKICB9CgogIGZ1bmN0aW9uIEMoZSkgewogICAgcmV0dXJuIGUuZ2V0UGFyYW0oImltYWdlX2RpbWVuc2lvbnMiLCAhMCwgImJvb2xlYW4iKTsKICB9CgogIGZ1bmN0aW9uIHgoZSwgdCkgewogICAgcmV0dXJuIE1hdGgubWF4KHBhcnNlSW50KGUsIDEwKSwgcGFyc2VJbnQodCwgMTApKTsKICB9CgogIGZ1bmN0aW9uIE8oZSkgewogICAgcmV0dXJuIGUgJiYgZS5yZXBsYWNlKC9weCQvLCAiIik7CiAgfQoKICBmdW5jdGlvbiBQKGUpIHsKICAgIHJldHVybiAwIDwgZS5sZW5ndGggJiYgL15bMC05XSskLy50ZXN0KGUpICYmIChlICs9ICJweCIpLCBlOwogIH0KCiAgZnVuY3Rpb24gXyhlKSB7CiAgICBpZiAoZS5tYXJnaW4pIHsKICAgICAgdmFyIHQgPSBTdHJpbmcoZS5tYXJnaW4pLnNwbGl0KCIgIik7CgogICAgICBzd2l0Y2ggKHQubGVuZ3RoKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgZVsibWFyZ2luLXRvcCJdID0gZVsibWFyZ2luLXRvcCJdIHx8IHRbMF0sIGVbIm1hcmdpbi1yaWdodCJdID0gZVsibWFyZ2luLXJpZ2h0Il0gfHwgdFswXSwgZVsibWFyZ2luLWJvdHRvbSJdID0gZVsibWFyZ2luLWJvdHRvbSJdIHx8IHRbMF0sIGVbIm1hcmdpbi1sZWZ0Il0gPSBlWyJtYXJnaW4tbGVmdCJdIHx8IHRbMF07CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgZVsibWFyZ2luLXRvcCJdID0gZVsibWFyZ2luLXRvcCJdIHx8IHRbMF0sIGVbIm1hcmdpbi1yaWdodCJdID0gZVsibWFyZ2luLXJpZ2h0Il0gfHwgdFsxXSwgZVsibWFyZ2luLWJvdHRvbSJdID0gZVsibWFyZ2luLWJvdHRvbSJdIHx8IHRbMF0sIGVbIm1hcmdpbi1sZWZ0Il0gPSBlWyJtYXJnaW4tbGVmdCJdIHx8IHRbMV07CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgZVsibWFyZ2luLXRvcCJdID0gZVsibWFyZ2luLXRvcCJdIHx8IHRbMF0sIGVbIm1hcmdpbi1yaWdodCJdID0gZVsibWFyZ2luLXJpZ2h0Il0gfHwgdFsxXSwgZVsibWFyZ2luLWJvdHRvbSJdID0gZVsibWFyZ2luLWJvdHRvbSJdIHx8IHRbMl0sIGVbIm1hcmdpbi1sZWZ0Il0gPSBlWyJtYXJnaW4tbGVmdCJdIHx8IHRbMV07CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgZVsibWFyZ2luLXRvcCJdID0gZVsibWFyZ2luLXRvcCJdIHx8IHRbMF0sIGVbIm1hcmdpbi1yaWdodCJdID0gZVsibWFyZ2luLXJpZ2h0Il0gfHwgdFsxXSwgZVsibWFyZ2luLWJvdHRvbSJdID0gZVsibWFyZ2luLWJvdHRvbSJdIHx8IHRbMl0sIGVbIm1hcmdpbi1sZWZ0Il0gPSBlWyJtYXJnaW4tbGVmdCJdIHx8IHRbM107CiAgICAgIH0KCiAgICAgIGRlbGV0ZSBlLm1hcmdpbjsKICAgIH0KCiAgICByZXR1cm4gZTsKICB9CgogIGZ1bmN0aW9uIEUoZSkgewogICAgcmV0dXJuICJJTUciID09PSBlLm5vZGVOYW1lICYmIChlLmhhc0F0dHJpYnV0ZSgiZGF0YS1tY2Utb2JqZWN0IikgfHwgZS5oYXNBdHRyaWJ1dGUoImRhdGEtbWNlLXBsYWNlaG9sZGVyIikpOwogIH0KCiAgZnVuY3Rpb24gUihlLCB0KSB7CiAgICByZXR1cm4gd2UuaXNEb21TYWZlKHQsICJpbWciLCBlLnNldHRpbmdzKTsKICB9CgogIGZ1bmN0aW9uIGsoZSkgewogICAgcmV0dXJuIGUuc3R5bGUubWFyZ2luTGVmdCAmJiBlLnN0eWxlLm1hcmdpblJpZ2h0ICYmIGUuc3R5bGUubWFyZ2luTGVmdCA9PT0gZS5zdHlsZS5tYXJnaW5SaWdodCA/IE8oZS5zdHlsZS5tYXJnaW5MZWZ0KSA6ICIiOwogIH0KCiAgZnVuY3Rpb24geihlKSB7CiAgICByZXR1cm4gZS5zdHlsZS5tYXJnaW5Ub3AgJiYgZS5zdHlsZS5tYXJnaW5Cb3R0b20gJiYgZS5zdHlsZS5tYXJnaW5Ub3AgPT09IGUuc3R5bGUubWFyZ2luQm90dG9tID8gTyhlLnN0eWxlLm1hcmdpblRvcCkgOiAiIjsKICB9CgogIGZ1bmN0aW9uIE0oZSkgewogICAgcmV0dXJuIGUuc3R5bGUuYm9yZGVyV2lkdGggPyBPKGUuc3R5bGUuYm9yZGVyV2lkdGgpIDogIiI7CiAgfQoKICBmdW5jdGlvbiBqKGUsIHQpIHsKICAgIHJldHVybiBlLmhhc0F0dHJpYnV0ZSh0KSA/IGUuZ2V0QXR0cmlidXRlKHQpIDogIiI7CiAgfQoKICBmdW5jdGlvbiBCKGUsIHQpIHsKICAgIHJldHVybiBlLnN0eWxlW3RdIHx8ICIiOwogIH0KCiAgZnVuY3Rpb24gSChlKSB7CiAgICByZXR1cm4gbnVsbCAhPT0gZS5wYXJlbnROb2RlICYmICJGSUdVUkUiID09PSBlLnBhcmVudE5vZGUubm9kZU5hbWU7CiAgfQoKICBmdW5jdGlvbiBGKGUsIHQsIG4pIHsKICAgICIiID09PSBuID8gZS5yZW1vdmVBdHRyaWJ1dGUodCkgOiBlLnNldEF0dHJpYnV0ZSh0LCBuKTsKICB9CgogIGZ1bmN0aW9uIEcoZSwgdCkgewogICAgdmFyIG4gPSBlLmdldEF0dHJpYnV0ZSgic3R5bGUiKSwKICAgICAgICByID0gdChudWxsICE9PSBuID8gbiA6ICIiKTsKICAgIDAgPCByLmxlbmd0aCA/IChlLnNldEF0dHJpYnV0ZSgic3R5bGUiLCByKSwgZS5zZXRBdHRyaWJ1dGUoImRhdGEtbWNlLXN0eWxlIiwgcikpIDogZS5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIik7CiAgfQoKICBmdW5jdGlvbiBXKGUsIHIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICBlLnN0eWxlW3RdID8gKGUuc3R5bGVbdF0gPSBQKG4pLCBHKGUsIHIpKSA6IEYoZSwgdCwgbik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gVihlLCB0KSB7CiAgICByZXR1cm4gZS5zdHlsZVt0XSA/IE8oZS5zdHlsZVt0XSkgOiBqKGUsIHQpOwogIH0KCiAgZnVuY3Rpb24gJChlLCB0KSB7CiAgICB2YXIgbiA9IFAodCk7CiAgICBlLnN0eWxlLm1hcmdpbkxlZnQgPSBuLCBlLnN0eWxlLm1hcmdpblJpZ2h0ID0gbjsKICB9CgogIGZ1bmN0aW9uIEooZSwgdCkgewogICAgdmFyIG4gPSBQKHQpOwogICAgZS5zdHlsZS5tYXJnaW5Ub3AgPSBuLCBlLnN0eWxlLm1hcmdpbkJvdHRvbSA9IG47CiAgfQoKICBmdW5jdGlvbiBLKGUsIHQpIHsKICAgIHZhciBuID0gUCh0KTsKICAgIGUuc3R5bGUuYm9yZGVyV2lkdGggPSBuOwogIH0KCiAgZnVuY3Rpb24gWChlLCB0KSB7CiAgICBlLnN0eWxlLmJvcmRlclN0eWxlID0gdDsKICB9CgogIGZ1bmN0aW9uIFooZSkgewogICAgcmV0dXJuICJGSUdVUkUiID09PSBlLm5vZGVOYW1lOwogIH0KCiAgZnVuY3Rpb24gcShlKSB7CiAgICByZXR1cm4gMCA9PT0gVWUuZ2V0QXR0cmliKGUsICJhbHQiKS5sZW5ndGggJiYgInByZXNlbnRhdGlvbiIgPT09IFVlLmdldEF0dHJpYihlLCAicm9sZSIpOwogIH0KCiAgZnVuY3Rpb24gUSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNyYzogIiIsCiAgICAgIGFsdDogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgd2lkdGg6ICIiLAogICAgICBoZWlnaHQ6ICIiLAogICAgICBjbGFzczogIiIsCiAgICAgIHN0eWxlOiAiIiwKICAgICAgY2FwdGlvbjogITEsCiAgICAgIGhzcGFjZTogIiIsCiAgICAgIHZzcGFjZTogIiIsCiAgICAgIGJvcmRlcjogIiIsCiAgICAgIGJvcmRlclN0eWxlOiAiIiwKICAgICAgaXNEZWNvcmF0aXZlOiAhMQogICAgfTsKICB9CgogIGZ1bmN0aW9uIFkoZSwgdCkgewogICAgcmV0dXJuIHsKICAgICAgc3JjOiBqKHQsICJzcmMiKSwKICAgICAgYWx0OiBxKG4gPSB0KSA/ICIiIDogaihuLCAiYWx0IiksCiAgICAgIHRpdGxlOiBqKHQsICJ0aXRsZSIpLAogICAgICB3aWR0aDogVih0LCAid2lkdGgiKSwKICAgICAgaGVpZ2h0OiBWKHQsICJoZWlnaHQiKSwKICAgICAgY2xhc3M6IGoodCwgImNsYXNzIiksCiAgICAgIHN0eWxlOiBlKGoodCwgInN0eWxlIikpLAogICAgICBjYXB0aW9uOiBIKHQpLAogICAgICBoc3BhY2U6IGsodCksCiAgICAgIHZzcGFjZTogeih0KSwKICAgICAgYm9yZGVyOiBNKHQpLAogICAgICBib3JkZXJTdHlsZTogQih0LCAiYm9yZGVyU3R5bGUiKSwKICAgICAgaXNEZWNvcmF0aXZlOiBxKHQpCiAgICB9OwogICAgdmFyIG47CiAgfQoKICBmdW5jdGlvbiBlZShlLCB0LCBuLCByLCBpKSB7CiAgICBuW3JdICE9PSB0W3JdICYmIGkoZSwgciwgbltyXSk7CiAgfQoKICBmdW5jdGlvbiB0ZShyLCBpKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgcihlLCBuKSwgRyhlLCBpKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBuZShlLCB0KSB7CiAgICB2YXIgbiA9IF8oZS5kb20uc3R5bGVzLnBhcnNlKHQpKSwKICAgICAgICByID0gZS5kb20uc3R5bGVzLnBhcnNlKGUuZG9tLnN0eWxlcy5zZXJpYWxpemUobikpOwoKICAgIHJldHVybiBlLmRvbS5zdHlsZXMuc2VyaWFsaXplKHIpOwogIH0KCiAgZnVuY3Rpb24gcmUoZSkgewogICAgdmFyIHQgPSBlLnNlbGVjdGlvbi5nZXROb2RlKCksCiAgICAgICAgbiA9IGUuZG9tLmdldFBhcmVudCh0LCAiZmlndXJlLmltYWdlIik7CiAgICByZXR1cm4gbiA/IGUuZG9tLnNlbGVjdCgiaW1nIiwgbilbMF0gOiB0ICYmICgiSU1HIiAhPT0gdC5ub2RlTmFtZSB8fCBFKHQpKSA/IG51bGwgOiB0OwogIH0KCiAgZnVuY3Rpb24gaWUobiwgZSkgewogICAgdmFyIHIsCiAgICAgICAgdCwKICAgICAgICBpID0gbi5kb20sCiAgICAgICAgYSA9IChmKG4uc2NoZW1hLmdldFRleHRCbG9ja0VsZW1lbnRzKCksIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiAhbi5zY2hlbWEuaXNWYWxpZENoaWxkKHQsICJmaWd1cmUiKTsKICAgIH0sIChyID0gdCA9IHt9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgICByW3RdID0gZTsKICAgIH0pLCBsKSwgdCksCiAgICAgICAgbyA9IGkuZ2V0UGFyZW50KGUucGFyZW50Tm9kZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGgodCA9IGEsIG4gPSBlLm5vZGVOYW1lKSAmJiBudWxsICE9IHRbbl07CiAgICAgIHZhciB0LCBuOwogICAgfSwgbi5nZXRCb2R5KCkpOwogICAgcmV0dXJuIG8gPyBpLnNwbGl0KG8sIGUpIDogZTsKICB9CgogIGZ1bmN0aW9uIGFlKHIsIGUpIHsKICAgIHZhciB0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKCiAgICAgIGlmIChDZShmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBuZShyLCBlKTsKICAgICAgfSwgX3YoX3Yoe30sIGUpLCB7CiAgICAgICAgY2FwdGlvbjogITEKICAgICAgfSksIHQpLCBJZSh0LCBlLmFsdCwgZS5pc0RlY29yYXRpdmUpLCBlLmNhcHRpb24pIHsKICAgICAgICB2YXIgbiA9IFVlLmNyZWF0ZSgiZmlndXJlIiwgewogICAgICAgICAgY2xhc3M6ICJpbWFnZSIKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbi5hcHBlbmRDaGlsZCh0KSwgbi5hcHBlbmRDaGlsZChVZS5jcmVhdGUoImZpZ2NhcHRpb24iLCB7CiAgICAgICAgICBjb250ZW50RWRpdGFibGU6ICJ0cnVlIgogICAgICAgIH0sICJDYXB0aW9uIikpLCBuLmNvbnRlbnRFZGl0YWJsZSA9ICJmYWxzZSIsIG47CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfShlKTsKCiAgICByLmRvbS5zZXRBdHRyaWIodCwgImRhdGEtbWNlLWlkIiwgIl9fbWNlbmV3IiksIHIuZm9jdXMoKSwgci5zZWxlY3Rpb24uc2V0Q29udGVudCh0Lm91dGVySFRNTCk7CiAgICB2YXIgbiwKICAgICAgICBpID0gci5kb20uc2VsZWN0KCcqW2RhdGEtbWNlLWlkPSJfX21jZW5ldyJdJylbMF07CiAgICByLmRvbS5zZXRBdHRyaWIoaSwgImRhdGEtbWNlLWlkIiwgbnVsbCksIFooaSkgPyAobiA9IGllKHIsIGkpLCByLnNlbGVjdGlvbi5zZWxlY3QobikpIDogci5zZWxlY3Rpb24uc2VsZWN0KGkpOwogIH0KCiAgZnVuY3Rpb24gb2UodCwgZSkgewogICAgdmFyIG4sCiAgICAgICAgciwKICAgICAgICBpLAogICAgICAgIGEsCiAgICAgICAgbywKICAgICAgICBsLAogICAgICAgIHMsCiAgICAgICAgYywKICAgICAgICB1LAogICAgICAgIG0sCiAgICAgICAgZCwKICAgICAgICBnLAogICAgICAgIHAsCiAgICAgICAgZiwKICAgICAgICBoLAogICAgICAgIGIgPSByZSh0KTsKCiAgICBmdW5jdGlvbiB5KCkgewogICAgICBmLm9ubG9hZCA9IGYub25lcnJvciA9IG51bGwsIGcuc2VsZWN0aW9uICYmIChnLnNlbGVjdGlvbi5zZWxlY3QoZiksIGcubm9kZUNoYW5nZWQoKSk7CiAgICB9CgogICAgYiA/IChuID0gWShmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbmUodCwgZSk7CiAgICB9LCBiKSwgciA9IF92KF92KHt9LCBuKSwgZSksIHMgPSB0LCBjID0gci5zcmMsIGkgPSBfdihfdih7fSwgciksIHsKICAgICAgc3JjOiBSKHMsIGMpID8gYyA6ICIiCiAgICB9KSwgci5zcmMgPyAobSA9IGksIGggPSByZSh1ID0gdCksIENlKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBuZSh1LCBlKTsKICAgIH0sIG0sIGgpLCB1LmRvbS5zZXRBdHRyaWIoaCwgInNyYyIsIGguZ2V0QXR0cmlidXRlKCJzcmMiKSksIFooaC5wYXJlbnROb2RlKSA/IChkID0gaC5wYXJlbnROb2RlLCBpZSh1LCBkKSwgdS5zZWxlY3Rpb24uc2VsZWN0KGgucGFyZW50Tm9kZSkpIDogKHUuc2VsZWN0aW9uLnNlbGVjdChoKSwgZyA9IHUsIHAgPSBtLCAoZiA9IGgpLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcC53aWR0aCB8fCBwLmhlaWdodCB8fCAhQyhnKSB8fCBnLmRvbS5zZXRBdHRyaWJzKGYsIHsKICAgICAgICB3aWR0aDogU3RyaW5nKGYuY2xpZW50V2lkdGgpLAogICAgICAgIGhlaWdodDogU3RyaW5nKGYuY2xpZW50SGVpZ2h0KQogICAgICB9KSwgeSgpOwogICAgfSwgZi5vbmVycm9yID0geSkpIDogKGEgPSB0LCAobyA9IGIpICYmIChsID0gYS5kb20uaXMoby5wYXJlbnROb2RlLCAiZmlndXJlLmltYWdlIikgPyBvLnBhcmVudE5vZGUgOiBvLCBhLmRvbS5yZW1vdmUobCksIGEuZm9jdXMoKSwgYS5ub2RlQ2hhbmdlZCgpLCBhLmRvbS5pc0VtcHR5KGEuZ2V0Qm9keSgpKSAmJiAoYS5zZXRDb250ZW50KCIiKSwgYS5zZWxlY3Rpb24uc2V0Q3Vyc29yTG9jYXRpb24oKSkpKSkgOiBlLnNyYyAmJiBhZSh0LCBfdihfdih7fSwgUSgpKSwgZSkpOwogIH0KCiAgZnVuY3Rpb24gbGUoZSkgewogICAgcmV0dXJuIFQoZS52YWx1ZSkgPyBlLnZhbHVlIDogIiI7CiAgfQoKICBmdW5jdGlvbiBzZSh0KSB7CiAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gbGUpLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZSA/IEwuZnJvbShlKS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gTmUoZSwgdCk7CiAgICAgIH0pIDogTC5ub25lKCk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gY2UoZSkgewogICAgdmFyIHQgPSBlLmltYWdlTGlzdC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAiaW1hZ2VzIiwKICAgICAgICB0eXBlOiAibGlzdGJveCIsCiAgICAgICAgbGFiZWw6ICJJbWFnZSBsaXN0IiwKICAgICAgICBpdGVtczogZQogICAgICB9OwogICAgfSksCiAgICAgICAgbiA9IHsKICAgICAgbmFtZTogImFsdCIsCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGxhYmVsOiAiQWx0ZXJuYXRpdmUgZGVzY3JpcHRpb24iLAogICAgICBkaXNhYmxlZDogZS5oYXNBY2Nlc3NpYmlsaXR5T3B0aW9ucyAmJiBlLmltYWdlLmlzRGVjb3JhdGl2ZQogICAgfSwKICAgICAgICByID0gZS5jbGFzc0xpc3QubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogImNsYXNzZXMiLAogICAgICAgIHR5cGU6ICJsaXN0Ym94IiwKICAgICAgICBsYWJlbDogIkNsYXNzIiwKICAgICAgICBpdGVtczogZQogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gUyhbW3sKICAgICAgbmFtZTogInNyYyIsCiAgICAgIHR5cGU6ICJ1cmxpbnB1dCIsCiAgICAgIGZpbGV0eXBlOiAiaW1hZ2UiLAogICAgICBsYWJlbDogIlNvdXJjZSIKICAgIH1dLCB0LnRvQXJyYXkoKSwgZS5oYXNBY2Nlc3NpYmlsaXR5T3B0aW9ucyAmJiBlLmhhc0Rlc2NyaXB0aW9uID8gW3sKICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgbGFiZWw6ICJBY2Nlc3NpYmlsaXR5IiwKICAgICAgaXRlbXM6IFt7CiAgICAgICAgbmFtZTogImlzRGVjb3JhdGl2ZSIsCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICBsYWJlbDogIkltYWdlIGlzIGRlY29yYXRpdmUiCiAgICAgIH1dCiAgICB9XSA6IFtdLCBlLmhhc0Rlc2NyaXB0aW9uID8gW25dIDogW10sIGUuaGFzSW1hZ2VUaXRsZSA/IFt7CiAgICAgIG5hbWU6ICJ0aXRsZSIsCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGxhYmVsOiAiSW1hZ2UgdGl0bGUiCiAgICB9XSA6IFtdLCBlLmhhc0RpbWVuc2lvbnMgPyBbewogICAgICBuYW1lOiAiZGltZW5zaW9ucyIsCiAgICAgIHR5cGU6ICJzaXplaW5wdXQiCiAgICB9XSA6IFtdLCBbX3YoX3Yoe30sIGUuY2xhc3NMaXN0LmlzU29tZSgpICYmIGUuaGFzSW1hZ2VDYXB0aW9uID8gewogICAgICB0eXBlOiAiZ3JpZCIsCiAgICAgIGNvbHVtbnM6IDIKICAgIH0gOiB7CiAgICAgIHR5cGU6ICJwYW5lbCIKICAgIH0pLCB7CiAgICAgIGl0ZW1zOiBTKFtyLnRvQXJyYXkoKSwgZS5oYXNJbWFnZUNhcHRpb24gPyBbewogICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgbGFiZWw6ICJDYXB0aW9uIiwKICAgICAgICBpdGVtczogW3sKICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICBuYW1lOiAiY2FwdGlvbiIsCiAgICAgICAgICBsYWJlbDogIlNob3cgY2FwdGlvbiIKICAgICAgICB9XQogICAgICB9XSA6IFtdXSkKICAgIH0pXV0pOwogIH0KCiAgZnVuY3Rpb24gdWUoZSkgewogICAgcmV0dXJuIHsKICAgICAgc3JjOiB7CiAgICAgICAgdmFsdWU6IGUuc3JjLAogICAgICAgIG1ldGE6IHt9CiAgICAgIH0sCiAgICAgIGltYWdlczogZS5zcmMsCiAgICAgIGFsdDogZS5hbHQsCiAgICAgIHRpdGxlOiBlLnRpdGxlLAogICAgICBkaW1lbnNpb25zOiB7CiAgICAgICAgd2lkdGg6IGUud2lkdGgsCiAgICAgICAgaGVpZ2h0OiBlLmhlaWdodAogICAgICB9LAogICAgICBjbGFzc2VzOiBlLmNsYXNzLAogICAgICBjYXB0aW9uOiBlLmNhcHRpb24sCiAgICAgIHN0eWxlOiBlLnN0eWxlLAogICAgICB2c3BhY2U6IGUudnNwYWNlLAogICAgICBib3JkZXI6IGUuYm9yZGVyLAogICAgICBoc3BhY2U6IGUuaHNwYWNlLAogICAgICBib3JkZXJzdHlsZTogZS5ib3JkZXJTdHlsZSwKICAgICAgZmlsZWlucHV0OiBbXSwKICAgICAgaXNEZWNvcmF0aXZlOiBlLmlzRGVjb3JhdGl2ZQogICAgfTsKICB9CgogIGZ1bmN0aW9uIG1lKGUsIHQpIHsKICAgIHJldHVybiB7CiAgICAgIHNyYzogZS5zcmMudmFsdWUsCiAgICAgIGFsdDogMCA9PT0gZS5hbHQubGVuZ3RoICYmIHQgPyBudWxsIDogZS5hbHQsCiAgICAgIHRpdGxlOiBlLnRpdGxlLAogICAgICB3aWR0aDogZS5kaW1lbnNpb25zLndpZHRoLAogICAgICBoZWlnaHQ6IGUuZGltZW5zaW9ucy5oZWlnaHQsCiAgICAgIGNsYXNzOiBlLmNsYXNzZXMsCiAgICAgIHN0eWxlOiBlLnN0eWxlLAogICAgICBjYXB0aW9uOiBlLmNhcHRpb24sCiAgICAgIGhzcGFjZTogZS5oc3BhY2UsCiAgICAgIHZzcGFjZTogZS52c3BhY2UsCiAgICAgIGJvcmRlcjogZS5ib3JkZXIsCiAgICAgIGJvcmRlclN0eWxlOiBlLmJvcmRlcnN0eWxlLAogICAgICBpc0RlY29yYXRpdmU6IGUuaXNEZWNvcmF0aXZlCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZGUoZSwgdCwgbiwgcikgewogICAgdmFyIGksIGEsIG8sIGwsIHMsIGMsIHUsIG0sIGQsIGcsIHAsIGYsIGgsIGIsIHksIHYsIEEsIEQsIHcsIFMsIFUsIEksIEMsIHgsIE87CiAgICBVID0gdCwgQyA9IChJID0gcikuZ2V0RGF0YSgpLCB4ID0gVSwgTyA9IEMuc3JjLnZhbHVlLCAoL14oPzpbYS16QS1aXSs6KT9cL1wvLy50ZXN0KE8pID8gTC5ub25lKCkgOiB4LnByZXBlbmRVUkwuYmluZChmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gTy5zdWJzdHJpbmcoMCwgZS5sZW5ndGgpICE9PSBlID8gTC5zb21lKGUgKyBPKSA6IEwubm9uZSgpOwogICAgfSkpLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgSS5zZXREYXRhKHsKICAgICAgICBzcmM6IHsKICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgbWV0YTogQy5zcmMubWV0YQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KSwgaCA9IHQsIHcgPSAoYiA9IHIpLmdldERhdGEoKSwgdm9pZCAwICE9PSAoUyA9IHcuc3JjLm1ldGEpICYmICh5ID0geGUoe30sIHcpLCBBID0geSwgRCA9IFMsICh2ID0gaCkuaGFzRGVzY3JpcHRpb24gJiYgVChELmFsdCkgJiYgKEEuYWx0ID0gRC5hbHQpLCB2Lmhhc0FjY2Vzc2liaWxpdHlPcHRpb25zICYmIChBLmlzRGVjb3JhdGl2ZSA9IEQuaXNEZWNvcmF0aXZlIHx8IEEuaXNEZWNvcmF0aXZlIHx8ICExKSwgdi5oYXNJbWFnZVRpdGxlICYmIFQoRC50aXRsZSkgJiYgKEEudGl0bGUgPSBELnRpdGxlKSwgdi5oYXNEaW1lbnNpb25zICYmIChUKEQud2lkdGgpICYmIChBLmRpbWVuc2lvbnMud2lkdGggPSBELndpZHRoKSwgVChELmhlaWdodCkgJiYgKEEuZGltZW5zaW9ucy5oZWlnaHQgPSBELmhlaWdodCkpLCBUKEQuY2xhc3MpICYmIEVlKHYuY2xhc3NMaXN0LCBELmNsYXNzKS5lYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIEEuY2xhc3NlcyA9IGUudmFsdWU7CiAgICB9KSwgdi5oYXNJbWFnZUNhcHRpb24gJiYgTihELmNhcHRpb24pICYmIChBLmNhcHRpb24gPSBELmNhcHRpb24pLCB2Lmhhc0FkdlRhYiAmJiAoVChELnN0eWxlKSAmJiAoQS5zdHlsZSA9IEQuc3R5bGUpLCBUKEQudnNwYWNlKSAmJiAoQS52c3BhY2UgPSBELnZzcGFjZSksIFQoRC5ib3JkZXIpICYmIChBLmJvcmRlciA9IEQuYm9yZGVyKSwgVChELmhzcGFjZSkgJiYgKEEuaHNwYWNlID0gRC5oc3BhY2UpLCBUKEQuYm9yZGVyc3R5bGUpICYmIChBLmJvcmRlcnN0eWxlID0gRC5ib3JkZXJzdHlsZSkpLCBiLnNldERhdGEoeSkpLCBpID0gZSwgYSA9IHQsIG8gPSBuLCBjID0gKHMgPSAobCA9IHIpLmdldERhdGEoKSkuc3JjLnZhbHVlLCAodSA9IHMuc3JjLm1ldGEgfHwge30pLndpZHRoIHx8IHUuaGVpZ2h0IHx8ICFhLmhhc0RpbWVuc2lvbnMgfHwgKDAgPCBjLmxlbmd0aCA/IGkuaW1hZ2VTaXplKGMpLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgby5vcGVuICYmIGwuc2V0RGF0YSh7CiAgICAgICAgZGltZW5zaW9uczogZQogICAgICB9KTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGUpOwogICAgfSkgOiBsLnNldERhdGEoewogICAgICBkaW1lbnNpb25zOiB7CiAgICAgICAgd2lkdGg6ICIiLAogICAgICAgIGhlaWdodDogIiIKICAgICAgfQogICAgfSkpLCBtID0gdCwgZCA9IG4sIHAgPSAoZyA9IHIpLmdldERhdGEoKSwgZiA9IEVlKG0uaW1hZ2VMaXN0LCBwLnNyYy52YWx1ZSksIGQucHJldkltYWdlID0gZiwgZy5zZXREYXRhKHsKICAgICAgaW1hZ2VzOiBmLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLnZhbHVlOwogICAgICB9KS5nZXRPcigiIikKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZ2UobCwgcywgdCwgYykgewogICAgdmFyIGUsCiAgICAgICAgbiA9IGMuZ2V0RGF0YSgpOwogICAgYy5ibG9jaygiVXBsb2FkaW5nIGltYWdlIiksICgwIDwgKGUgPSBuLmZpbGVpbnB1dCkubGVuZ3RoID8gTC5zb21lKGVbMF0pIDogTC5ub25lKCkpLmZvbGQoZnVuY3Rpb24gKCkgewogICAgICBjLnVuYmxvY2soKTsKICAgIH0sIGZ1bmN0aW9uIChuKSB7CiAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgYy51bmJsb2NrKCksIFVSTC5yZXZva2VPYmplY3RVUkwoYSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgIGMuc2V0RGF0YSh7CiAgICAgICAgICBzcmM6IHsKICAgICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICAgIG1ldGE6IHt9CiAgICAgICAgICB9CiAgICAgICAgfSksIGMuc2hvd1RhYigiZ2VuZXJhbCIpLCBkZShsLCBzLCB0LCBjKTsKICAgICAgfQoKICAgICAgdmFyIGEgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG4pLAogICAgICAgICAgbyA9IG47CiAgICAgIG5ldyBEZShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICBuLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGUobi5yZXN1bHQpOwogICAgICAgIH0sIG4ub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHQobi5lcnJvci5tZXNzYWdlKTsKICAgICAgICB9LCBuLnJlYWRBc0RhdGFVUkwobyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGwuY3JlYXRlQmxvYkNhY2hlKG4sIGEsIGUpOwogICAgICAgIHMuYXV0b21hdGljVXBsb2FkcyA/IGwudXBsb2FkSW1hZ2UodCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgaShlLnVybCksIHIoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcigpLCBsLmFsZXJ0RXJyKGUpOwogICAgICAgIH0pIDogKGwuYWRkVG9CbG9iQ2FjaGUodCksIGkodC5ibG9iVXJpKCkpLCBjLnVuYmxvY2soKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBwZShTLCBVLCBJKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4sIHIsIGksIGEsIG8sIGwsIHMsIGMsIHUsIG0sIGQsIGcsIHAsIGYsIGgsIGIsIHksIHYsIEEsIEQsIHc7CiAgICAgICJzcmMiID09PSB0Lm5hbWUgPyBkZShTLCBVLCBJLCBlKSA6ICJpbWFnZXMiID09PSB0Lm5hbWUgPyAoYyA9IFMsIHUgPSBVLCBtID0gSSwgZyA9IChkID0gZSkuZ2V0RGF0YSgpLCAocCA9IEVlKHUuaW1hZ2VMaXN0LCBnLmltYWdlcykpLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAiIiA9PT0gZy5hbHQgfHwgbS5wcmV2SW1hZ2UubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZS50ZXh0ID09PSBnLmFsdDsKICAgICAgICB9KS5nZXRPcighMSkgPyAiIiA9PT0gZS52YWx1ZSA/IGQuc2V0RGF0YSh7CiAgICAgICAgICBzcmM6IGUsCiAgICAgICAgICBhbHQ6IG0ucHJldkFsdAogICAgICAgIH0pIDogZC5zZXREYXRhKHsKICAgICAgICAgIHNyYzogZSwKICAgICAgICAgIGFsdDogZS50ZXh0CiAgICAgICAgfSkgOiBkLnNldERhdGEoewogICAgICAgICAgc3JjOiBlCiAgICAgICAgfSk7CiAgICAgIH0pLCBtLnByZXZJbWFnZSA9IHAsIGRlKGMsIHUsIG0sIGQpKSA6ICJhbHQiID09PSB0Lm5hbWUgPyBJLnByZXZBbHQgPSBlLmdldERhdGEoKS5hbHQgOiAic3R5bGUiID09PSB0Lm5hbWUgPyAobyA9IFMsIHMgPSAobCA9IGUpLmdldERhdGEoKSwgeSA9IG8ucGFyc2VTdHlsZSwgdiA9IG8uc2VyaWFsaXplU3R5bGUsIEQgPSBfKHkoKEEgPSBzKS5zdHlsZSkpLCAodyA9IHhlKHt9LCBBKSkudnNwYWNlID0gRFsibWFyZ2luLXRvcCJdICYmIERbIm1hcmdpbi1ib3R0b20iXSAmJiBEWyJtYXJnaW4tdG9wIl0gPT09IERbIm1hcmdpbi1ib3R0b20iXSA/IE8oU3RyaW5nKERbIm1hcmdpbi10b3AiXSkpIDogIiIsIHcuaHNwYWNlID0gRFsibWFyZ2luLXJpZ2h0Il0gJiYgRFsibWFyZ2luLWxlZnQiXSAmJiBEWyJtYXJnaW4tcmlnaHQiXSA9PT0gRFsibWFyZ2luLWxlZnQiXSA/IE8oU3RyaW5nKERbIm1hcmdpbi1yaWdodCJdKSkgOiAiIiwgdy5ib3JkZXIgPSBEWyJib3JkZXItd2lkdGgiXSA/IE8oU3RyaW5nKERbImJvcmRlci13aWR0aCJdKSkgOiAiIiwgdy5ib3JkZXJzdHlsZSA9IERbImJvcmRlci1zdHlsZSJdID8gU3RyaW5nKERbImJvcmRlci1zdHlsZSJdKSA6ICIiLCB3LnN0eWxlID0gdih5KHYoRCkpKSwgbC5zZXREYXRhKHcpKSA6ICJ2c3BhY2UiID09PSB0Lm5hbWUgfHwgImhzcGFjZSIgPT09IHQubmFtZSB8fCAiYm9yZGVyIiA9PT0gdC5uYW1lIHx8ICJib3JkZXJzdHlsZSIgPT09IHQubmFtZSA/IChuID0gUywgaSA9IHhlKHVlKFUuaW1hZ2UpLCAociA9IGUpLmdldERhdGEoKSksIGYgPSBuLm5vcm1hbGl6ZUNzcywgaCA9IG1lKGksICExKSwgRihiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIiksICJzdHlsZSIsIGguc3R5bGUpLCAhayhiKSAmJiAiIiA9PT0gaC5oc3BhY2UgfHwgJChiLCBoLmhzcGFjZSksICF6KGIpICYmICIiID09PSBoLnZzcGFjZSB8fCBKKGIsIGgudnNwYWNlKSwgIU0oYikgJiYgIiIgPT09IGguYm9yZGVyIHx8IEsoYiwgaC5ib3JkZXIpLCAhQihiLCAiYm9yZGVyU3R5bGUiKSAmJiAiIiA9PT0gaC5ib3JkZXJTdHlsZSB8fCBYKGIsIGguYm9yZGVyU3R5bGUpLCBhID0gZihiLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksIHIuc2V0RGF0YSh7CiAgICAgICAgc3R5bGU6IGEKICAgICAgfSkpIDogImZpbGVpbnB1dCIgPT09IHQubmFtZSA/IGdlKFMsIFUsIEksIGUpIDogImlzRGVjb3JhdGl2ZSIgPT09IHQubmFtZSAmJiAoZS5nZXREYXRhKCkuaXNEZWNvcmF0aXZlID8gZS5kaXNhYmxlKCJhbHQiKSA6IGUuZW5hYmxlKCJhbHQiKSk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmUodikgewogICAgdmFyIHQsCiAgICAgICAgbiwKICAgICAgICByLAogICAgICAgIGksCiAgICAgICAgYSwKICAgICAgICBvLAogICAgICAgIGwsCiAgICAgICAgcywKICAgICAgICBjLAogICAgICAgIEEgPSB7CiAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChuKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHhlKHVlKG4uaW1hZ2UpLCBlLmdldERhdGEoKSk7CiAgICAgICAgICBjLmV4ZWNDb21tYW5kKCJtY2VVcGRhdGVJbWFnZSIsICExLCBtZSh0LCBuLmhhc0FjY2Vzc2liaWxpdHlPcHRpb25zKSksIGMuZWRpdG9yVXBsb2FkLnVwbG9hZEltYWdlc0F1dG8oKSwgZS5jbG9zZSgpOwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIGltYWdlU2l6ZTogZnVuY3Rpb24gaW1hZ2VTaXplKGUpIHsKICAgICAgICByZXR1cm4gUihzLCBlKSA/IChpID0gcy5kb2N1bWVudEJhc2VVUkkudG9BYnNvbHV0ZShlKSwgbmV3IERlKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgICAgci5vbmxvYWQgPSByLm9uZXJyb3IgPSBudWxsLCByLnBhcmVudE5vZGUgJiYgci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpLCB0KGUpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICByLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSB4KHIud2lkdGgsIHIuY2xpZW50V2lkdGgpLAogICAgICAgICAgICAgICAgdCA9IHgoci5oZWlnaHQsIHIuY2xpZW50SGVpZ2h0KTsKICAgICAgICAgICAgbihEZS5yZXNvbHZlKHsKICAgICAgICAgICAgICB3aWR0aDogZSwKICAgICAgICAgICAgICBoZWlnaHQ6IHQKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSwgci5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBuKERlLnJlamVjdCgiRmFpbGVkIHRvIGdldCBpbWFnZSBkaW1lbnNpb25zIGZvcjogIiArIGkpKTsKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgZSA9IHIuc3R5bGU7CiAgICAgICAgICBlLnZpc2liaWxpdHkgPSAiaGlkZGVuIiwgZS5wb3NpdGlvbiA9ICJmaXhlZCIsIGUuYm90dG9tID0gZS5sZWZ0ID0gIjBweCIsIGUud2lkdGggPSBlLmhlaWdodCA9ICJhdXRvIiwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyKSwgci5zcmMgPSBpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHdpZHRoOiBTdHJpbmcoZS53aWR0aCksCiAgICAgICAgICAgIGhlaWdodDogU3RyaW5nKGUuaGVpZ2h0KQogICAgICAgICAgfTsKICAgICAgICB9KSkgOiBEZS5yZXNvbHZlKHsKICAgICAgICAgIHdpZHRoOiAiIiwKICAgICAgICAgIGhlaWdodDogIiIKICAgICAgICB9KTsKICAgICAgICB2YXIgaTsKICAgICAgfSwKICAgICAgYWRkVG9CbG9iQ2FjaGU6IGZ1bmN0aW9uIGFkZFRvQmxvYkNhY2hlKGUpIHsKICAgICAgICBsLmVkaXRvclVwbG9hZC5ibG9iQ2FjaGUuYWRkKGUpOwogICAgICB9LAogICAgICBjcmVhdGVCbG9iQ2FjaGU6IGZ1bmN0aW9uIGNyZWF0ZUJsb2JDYWNoZShlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIG8uZWRpdG9yVXBsb2FkLmJsb2JDYWNoZS5jcmVhdGUoewogICAgICAgICAgYmxvYjogZSwKICAgICAgICAgIGJsb2JVcmk6IHQsCiAgICAgICAgICBuYW1lOiBlLm5hbWUgPyBlLm5hbWUucmVwbGFjZSgvXC5bXlwuXSskLywgIiIpIDogbnVsbCwKICAgICAgICAgIGZpbGVuYW1lOiBlLm5hbWUsCiAgICAgICAgICBiYXNlNjQ6IG4uc3BsaXQoIiwiKVsxXQogICAgICAgIH0pOwogICAgICB9LAogICAgICBhbGVydEVycjogZnVuY3Rpb24gYWxlcnRFcnIoZSkgewogICAgICAgIGEud2luZG93TWFuYWdlci5hbGVydChlKTsKICAgICAgfSwKICAgICAgbm9ybWFsaXplQ3NzOiBmdW5jdGlvbiBub3JtYWxpemVDc3MoZSkgewogICAgICAgIHJldHVybiBuZShpLCBlKTsKICAgICAgfSwKICAgICAgcGFyc2VTdHlsZTogZnVuY3Rpb24gcGFyc2VTdHlsZShlKSB7CiAgICAgICAgcmV0dXJuIHIuZG9tLnBhcnNlU3R5bGUoZSk7CiAgICAgIH0sCiAgICAgIHNlcmlhbGl6ZVN0eWxlOiBmdW5jdGlvbiBzZXJpYWxpemVTdHlsZShlLCB0KSB7CiAgICAgICAgcmV0dXJuIG4uZG9tLnNlcmlhbGl6ZVN0eWxlKGUsIHQpOwogICAgICB9LAogICAgICB1cGxvYWRJbWFnZTogKHQgPSBuID0gciA9IGkgPSBhID0gbyA9IGwgPSBzID0gYyA9IHYsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIE9lKHQpLnVwbG9hZChbZV0sICExKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gMCA9PT0gZS5sZW5ndGggPyBEZS5yZWplY3QoIkZhaWxlZCB0byB1cGxvYWQgaW1hZ2UiKSA6ICExID09PSBlWzBdLnN0YXR1cyA/IERlLnJlamVjdChlWzBdLmVycm9yLm1lc3NhZ2UpIDogZVswXTsKICAgICAgICB9KTsKICAgICAgfSkKICAgIH07CiAgICByZXR1cm4gewogICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkgewogICAgICAgIHZhciBhLCByLCB0LCBlLCBpLCBuLCBvLCBsLCBzLCBjLCB1LCBtLCBkLCBnLCBwLCBmLCBoLCBiLCB5OwogICAgICAgIHIgPSB2LCBpID0gUGUoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiByLmNvbnZlcnRVUkwoZS52YWx1ZSB8fCBlLnVybCwgInNyYyIpOwogICAgICAgIH0pLCBuID0gbmV3IERlKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiA9IGZ1bmN0aW9uIG4oZSkgewogICAgICAgICAgICB0KGkoZSkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFMoW1t7CiAgICAgICAgICAgICAgICB0ZXh0OiAiTm9uZSIsCiAgICAgICAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICAgICAgICB9XSwgZV0pOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9LAogICAgICAgICAgICAgIGUgPSByLmdldFBhcmFtKCJpbWFnZV9saXN0IiwgITEpOwoKICAgICAgICAgIFQoZSkgPyBTZS5zZW5kKHsKICAgICAgICAgICAgdXJsOiBlLAogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGUpIHsKICAgICAgICAgICAgICBuKEpTT04ucGFyc2UoZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSA6IHcoZSkgPyBlKG4pIDogbihlKTsKICAgICAgICB9KSwgbyA9IF9lKHIuZ2V0UGFyYW0oImltYWdlX2NsYXNzX2xpc3QiKSksIGwgPSByLmdldFBhcmFtKCJpbWFnZV9hZHZ0YWIiLCAhMSwgImJvb2xlYW4iKSwgcyA9IHIuZ2V0UGFyYW0oImltYWdlX3VwbG9hZHRhYiIsICEwLCAiYm9vbGVhbiIpLCBjID0gRChyLmdldFBhcmFtKCJpbWFnZXNfdXBsb2FkX3VybCIpKSwgdSA9IEQoci5nZXRQYXJhbSgiaW1hZ2VzX3VwbG9hZF9oYW5kbGVyIikpLCBtID0gKGUgPSByZSh0ID0gcikpID8gWShmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIG5lKHQsIGUpOwogICAgICAgIH0sIGUpIDogUSgpLCBkID0gci5nZXRQYXJhbSgiaW1hZ2VfZGVzY3JpcHRpb24iLCAhMCwgImJvb2xlYW4iKSwgZyA9IHIuZ2V0UGFyYW0oImltYWdlX3RpdGxlIiwgITEsICJib29sZWFuIiksIHAgPSBDKHIpLCBmID0gci5nZXRQYXJhbSgiaW1hZ2VfY2FwdGlvbiIsICExLCAiYm9vbGVhbiIpLCBoID0gci5nZXRQYXJhbSgiYTExeV9hZHZhbmNlZF9vcHRpb25zIiwgITEsICJib29sZWFuIiksIGIgPSByLmdldFBhcmFtKCJhdXRvbWF0aWNfdXBsb2FkcyIsICEwLCAiYm9vbGVhbiIpLCB5ID0gTC5zb21lKHIuZ2V0UGFyYW0oImltYWdlX3ByZXBlbmRfdXJsIiwgIiIsICJzdHJpbmciKSkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gVChlKSAmJiAwIDwgZS5sZW5ndGg7CiAgICAgICAgfSksIG4udGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW1hZ2U6IG0sCiAgICAgICAgICAgIGltYWdlTGlzdDogZSwKICAgICAgICAgICAgY2xhc3NMaXN0OiBvLAogICAgICAgICAgICBoYXNBZHZUYWI6IGwsCiAgICAgICAgICAgIGhhc1VwbG9hZFRhYjogcywKICAgICAgICAgICAgaGFzVXBsb2FkVXJsOiBjLAogICAgICAgICAgICBoYXNVcGxvYWRIYW5kbGVyOiB1LAogICAgICAgICAgICBoYXNEZXNjcmlwdGlvbjogZCwKICAgICAgICAgICAgaGFzSW1hZ2VUaXRsZTogZywKICAgICAgICAgICAgaGFzRGltZW5zaW9uczogcCwKICAgICAgICAgICAgaGFzSW1hZ2VDYXB0aW9uOiBmLAogICAgICAgICAgICBwcmVwZW5kVVJMOiB5LAogICAgICAgICAgICBoYXNBY2Nlc3NpYmlsaXR5T3B0aW9uczogaCwKICAgICAgICAgICAgYXV0b21hdGljVXBsb2FkczogYgogICAgICAgICAgfTsKICAgICAgICB9KS50aGVuKChhID0gQSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICBpID0gewogICAgICAgICAgICBwcmV2SW1hZ2U6IEVlKCh0ID0gZSkuaW1hZ2VMaXN0LCB0LmltYWdlLnNyYyksCiAgICAgICAgICAgIHByZXZBbHQ6IHQuaW1hZ2UuYWx0LAogICAgICAgICAgICBvcGVuOiAhMAogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRpdGxlOiAiSW5zZXJ0L0VkaXQgSW1hZ2UiLAogICAgICAgICAgICBzaXplOiAibm9ybWFsIiwKICAgICAgICAgICAgYm9keTogKHIgPSBlKS5oYXNBZHZUYWIgfHwgci5oYXNVcGxvYWRVcmwgfHwgci5oYXNVcGxvYWRIYW5kbGVyID8gewogICAgICAgICAgICAgIHR5cGU6ICJ0YWJwYW5lbCIsCiAgICAgICAgICAgICAgdGFiczogUyhbW2tlKHIpXSwgci5oYXNBZHZUYWIgPyBbUmUocildIDogW10sIHIuaGFzVXBsb2FkVGFiICYmIChyLmhhc1VwbG9hZFVybCB8fCByLmhhc1VwbG9hZEhhbmRsZXIpID8gW01lKHIpXSA6IFtdXSkKICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICB0eXBlOiAicGFuZWwiLAogICAgICAgICAgICAgIGl0ZW1zOiB6ZShyKQogICAgICAgICAgICB9LAogICAgICAgICAgICBidXR0b25zOiBbewogICAgICAgICAgICAgIHR5cGU6ICJjYW5jZWwiLAogICAgICAgICAgICAgIG5hbWU6ICJjYW5jZWwiLAogICAgICAgICAgICAgIHRleHQ6ICJDYW5jZWwiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgICBuYW1lOiAic2F2ZSIsCiAgICAgICAgICAgICAgdGV4dDogIlNhdmUiLAogICAgICAgICAgICAgIHByaW1hcnk6ICEwCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBpbml0aWFsRGF0YTogdWUoZS5pbWFnZSksCiAgICAgICAgICAgIG9uU3VibWl0OiBhLm9uU3VibWl0KGUpLAogICAgICAgICAgICBvbkNoYW5nZTogcGUoYSwgZSwgaSksCiAgICAgICAgICAgIG9uQ2xvc2U6IChuID0gaSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG4ub3BlbiA9ICExOwogICAgICAgICAgICB9KQogICAgICAgICAgfTsKICAgICAgICB9KSkudGhlbih2LndpbmRvd01hbmFnZXIub3Blbik7CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBoZShhKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgZm9yICh2YXIgdCA9IGUubGVuZ3RoLCBuID0gZnVuY3Rpb24gbihlKSB7CiAgICAgICAgZS5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCBhID8gInRydWUiIDogbnVsbCk7CiAgICAgIH07IHQtLTspIHsKICAgICAgICB2YXIgciwKICAgICAgICAgICAgaSA9IGVbdF07CiAgICAgICAgKHIgPSBpLmF0dHIoImNsYXNzIikpICYmIC9cYmltYWdlXGIvLnRlc3QocikgJiYgKGkuYXR0cigiY29udGVudGVkaXRhYmxlIiwgYSA/ICJmYWxzZSIgOiBudWxsKSwgVGUuZWFjaChpLmdldEFsbCgiZmlnY2FwdGlvbiIpLCBuKSk7CiAgICAgIH0KICAgIH07CiAgfQoKICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93IHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpczsiKSgpOwoKICBmdW5jdGlvbiBiZShlKSB7CiAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgRXJyb3IoIk5vZGUgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIik7CiAgICByZXR1cm4gewogICAgICBkb206IGUKICAgIH07CiAgfQoKICB2YXIgeWUsCiAgICAgIHZlID0gYmUsCiAgICAgIEFlID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UuZG9tLkRPTVV0aWxzIiksCiAgICAgIERlID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5Qcm9taXNlIiksCiAgICAgIHdlID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5VUkkiKSwKICAgICAgU2UgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS51dGlsLlhIUiIpLAogICAgICBVZSA9IEFlLkRPTSwKICAgICAgSWUgPSBmdW5jdGlvbiBJZShlLCB0LCBuKSB7CiAgICBuID8gKFVlLnNldEF0dHJpYihlLCAicm9sZSIsICJwcmVzZW50YXRpb24iKSwgSSh2ZShlKSwgImFsdCIsICIiKSkgOiAoaSA9PT0gdCA/IHZlKGUpLmRvbS5yZW1vdmVBdHRyaWJ1dGUoImFsdCIpIDogSSh2ZShlKSwgImFsdCIsIHQpLCAicHJlc2VudGF0aW9uIiA9PT0gVWUuZ2V0QXR0cmliKGUsICJyb2xlIikgJiYgVWUuc2V0QXR0cmliKGUsICJyb2xlIiwgIiIpKTsKICB9LAogICAgICBDZSA9IGZ1bmN0aW9uIENlKGUsIHQsIG4pIHsKICAgIHZhciByID0gWShlLCBuKTsKICAgIGVlKG4sIHIsIHQsICJjYXB0aW9uIiwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgcmV0dXJuIEgociA9IGUpID8gKG8gPSByLnBhcmVudE5vZGUsIFVlLmluc2VydEFmdGVyKHIsIG8pLCBVZS5yZW1vdmUobykpIDogKGkgPSByLCBhID0gVWUuY3JlYXRlKCJmaWd1cmUiLCB7CiAgICAgICAgY2xhc3M6ICJpbWFnZSIKICAgICAgfSksIFVlLmluc2VydEFmdGVyKGEsIGkpLCBhLmFwcGVuZENoaWxkKGkpLCBhLmFwcGVuZENoaWxkKFVlLmNyZWF0ZSgiZmlnY2FwdGlvbiIsIHsKICAgICAgICBjb250ZW50RWRpdGFibGU6ICJ0cnVlIgogICAgICB9LCAiQ2FwdGlvbiIpKSwgYS5jb250ZW50RWRpdGFibGUgPSAiZmFsc2UiKSwgMDsKICAgICAgdmFyIHIsIGksIGEsIG87CiAgICB9KSwgZWUobiwgciwgdCwgInNyYyIsIEYpLCBlZShuLCByLCB0LCAidGl0bGUiLCBGKSwgZWUobiwgciwgdCwgIndpZHRoIiwgVygwLCBlKSksIGVlKG4sIHIsIHQsICJoZWlnaHQiLCBXKDAsIGUpKSwgZWUobiwgciwgdCwgImNsYXNzIiwgRiksIGVlKG4sIHIsIHQsICJzdHlsZSIsIHRlKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiBGKGUsICJzdHlsZSIsIHQpLCAwOwogICAgfSwgZSkpLCBlZShuLCByLCB0LCAiaHNwYWNlIiwgdGUoJCwgZSkpLCBlZShuLCByLCB0LCAidnNwYWNlIiwgdGUoSiwgZSkpLCBlZShuLCByLCB0LCAiYm9yZGVyIiwgdGUoSywgZSkpLCBlZShuLCByLCB0LCAiYm9yZGVyU3R5bGUiLCB0ZShYLCBlKSksIHQuYWx0ID09PSByLmFsdCAmJiB0LmlzRGVjb3JhdGl2ZSA9PT0gci5pc0RlY29yYXRpdmUgfHwgSWUobiwgdC5hbHQsIHQuaXNEZWNvcmF0aXZlKTsKICB9LAogICAgICB4ZSA9ICh5ZSA9IGZ1bmN0aW9uIHllKGUsIHQpIHsKICAgIHJldHVybiBzKGUpICYmIHModCkgPyB4ZShlLCB0KSA6IHQ7CiAgfSwgZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgfQoKICAgIGlmICgwID09PSBlLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBtZXJnZSB6ZXJvIG9iamVjdHMiKTsKCiAgICBmb3IgKHZhciBuID0ge30sIHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKykgewogICAgICB2YXIgaSwKICAgICAgICAgIGEgPSBlW3JdOwoKICAgICAgZm9yIChpIGluIGEpIHsKICAgICAgICBoKGEsIGkpICYmIChuW2ldID0geWUobltpXSwgYVtpXSkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG47CiAgfSksCiAgICAgIE9lID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5JbWFnZVVwbG9hZGVyIiksCiAgICAgIFRlID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5Ub29scyIpLAogICAgICBOZSA9IGZ1bmN0aW9uIE5lKGUsIGEpIHsKICAgIHZhciBvID0gW107CiAgICByZXR1cm4gVGUuZWFjaChlLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCwKICAgICAgICAgIG4sCiAgICAgICAgICByLAogICAgICAgICAgaSA9IFQoKHQgPSBlKS50ZXh0KSA/IHQudGV4dCA6IFQodC50aXRsZSkgPyB0LnRpdGxlIDogIiI7CiAgICAgIHZvaWQgMCAhPT0gZS5tZW51ID8gKG4gPSBOZShlLm1lbnUsIGEpLCBvLnB1c2goewogICAgICAgIHRleHQ6IGksCiAgICAgICAgaXRlbXM6IG4KICAgICAgfSkpIDogKHIgPSBhKGUpLCBvLnB1c2goewogICAgICAgIHRleHQ6IGksCiAgICAgICAgdmFsdWU6IHIKICAgICAgfSkpOwogICAgfSksIG87CiAgfSwKICAgICAgTGUgPSBmdW5jdGlvbiBMZShlLCBpKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgZm9yICh2YXIgdCwgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB7CiAgICAgICAgdmFyIHIgPSBoKHQgPSBlW25dLCAiaXRlbXMiKSA/IExlKHQuaXRlbXMsIGkpIDogdC52YWx1ZSA9PT0gaSA/IEwuc29tZSh0KSA6IEwubm9uZSgpOwogICAgICAgIGlmIChyLmlzU29tZSgpKSByZXR1cm4gcjsKICAgICAgfQoKICAgICAgcmV0dXJuIEwubm9uZSgpOwogICAgfShlKTsKICB9LAogICAgICBQZSA9IHNlLAogICAgICBfZSA9IGZ1bmN0aW9uIF9lKGUpIHsKICAgIHJldHVybiBzZShsZSkoZSk7CiAgfSwKICAgICAgRWUgPSBmdW5jdGlvbiBFZShlLCB0KSB7CiAgICByZXR1cm4gZS5iaW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBMZShlLCB0KTsKICAgIH0pOwogIH0sCiAgICAgIFJlID0gZnVuY3Rpb24gUmUoZSkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICJBZHZhbmNlZCIsCiAgICAgIG5hbWU6ICJhZHZhbmNlZCIsCiAgICAgIGl0ZW1zOiBbewogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgbGFiZWw6ICJTdHlsZSIsCiAgICAgICAgbmFtZTogInN0eWxlIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogImdyaWQiLAogICAgICAgIGNvbHVtbnM6IDIsCiAgICAgICAgaXRlbXM6IFt7CiAgICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgICAgbGFiZWw6ICJWZXJ0aWNhbCBzcGFjZSIsCiAgICAgICAgICBuYW1lOiAidnNwYWNlIiwKICAgICAgICAgIGlucHV0TW9kZTogIm51bWVyaWMiCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICAgIGxhYmVsOiAiSG9yaXpvbnRhbCBzcGFjZSIsCiAgICAgICAgICBuYW1lOiAiaHNwYWNlIiwKICAgICAgICAgIGlucHV0TW9kZTogIm51bWVyaWMiCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICAgIGxhYmVsOiAiQm9yZGVyIHdpZHRoIiwKICAgICAgICAgIG5hbWU6ICJib3JkZXIiLAogICAgICAgICAgaW5wdXRNb2RlOiAibnVtZXJpYyIKICAgICAgICB9LCB7CiAgICAgICAgICB0eXBlOiAibGlzdGJveCIsCiAgICAgICAgICBuYW1lOiAiYm9yZGVyc3R5bGUiLAogICAgICAgICAgbGFiZWw6ICJCb3JkZXIgc3R5bGUiLAogICAgICAgICAgaXRlbXM6IFt7CiAgICAgICAgICAgIHRleHQ6ICJTZWxlY3QuLi4iLAogICAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGV4dDogIlNvbGlkIiwKICAgICAgICAgICAgdmFsdWU6ICJzb2xpZCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGV4dDogIkRvdHRlZCIsCiAgICAgICAgICAgIHZhbHVlOiAiZG90dGVkIgogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAiRGFzaGVkIiwKICAgICAgICAgICAgdmFsdWU6ICJkYXNoZWQiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRleHQ6ICJEb3VibGUiLAogICAgICAgICAgICB2YWx1ZTogImRvdWJsZSIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGV4dDogIkdyb292ZSIsCiAgICAgICAgICAgIHZhbHVlOiAiZ3Jvb3ZlIgogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAiUmlkZ2UiLAogICAgICAgICAgICB2YWx1ZTogInJpZGdlIgogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAiSW5zZXQiLAogICAgICAgICAgICB2YWx1ZTogImluc2V0IgogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAiT3V0c2V0IiwKICAgICAgICAgICAgdmFsdWU6ICJvdXRzZXQiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRleHQ6ICJOb25lIiwKICAgICAgICAgICAgdmFsdWU6ICJub25lIgogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAiSGlkZGVuIiwKICAgICAgICAgICAgdmFsdWU6ICJoaWRkZW4iCiAgICAgICAgICB9XQogICAgICAgIH1dCiAgICAgIH1dCiAgICB9OwogIH0sCiAgICAgIGtlID0gZnVuY3Rpb24ga2UoZSkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICJHZW5lcmFsIiwKICAgICAgbmFtZTogImdlbmVyYWwiLAogICAgICBpdGVtczogY2UoZSkKICAgIH07CiAgfSwKICAgICAgemUgPSBjZSwKICAgICAgTWUgPSBmdW5jdGlvbiBNZShlKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogIlVwbG9hZCIsCiAgICAgIG5hbWU6ICJ1cGxvYWQiLAogICAgICBpdGVtczogW3sKICAgICAgICB0eXBlOiAiZHJvcHpvbmUiLAogICAgICAgIG5hbWU6ICJmaWxlaW5wdXQiCiAgICAgIH1dCiAgICB9OwogIH07CgogIG8uYWRkKCJpbWFnZSIsIGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCwgbiwgcjsKICAgICh0ID0gZSkub24oIlByZUluaXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHQucGFyc2VyLmFkZE5vZGVGaWx0ZXIoImZpZ3VyZSIsIGhlKCEwKSksIHQuc2VyaWFsaXplci5hZGROb2RlRmlsdGVyKCJmaWd1cmUiLCBoZSghMSkpOwogICAgfSksIChuID0gZSkudWkucmVnaXN0cnkuYWRkVG9nZ2xlQnV0dG9uKCJpbWFnZSIsIHsKICAgICAgaWNvbjogImltYWdlIiwKICAgICAgdG9vbHRpcDogIkluc2VydC9lZGl0IGltYWdlIiwKICAgICAgb25BY3Rpb246IGZlKG4pLm9wZW4sCiAgICAgIG9uU2V0dXA6IGZ1bmN0aW9uIG9uU2V0dXAoZSkgewogICAgICAgIHJldHVybiBlLnNldEFjdGl2ZShEKHJlKG4pKSksIG4uc2VsZWN0aW9uLnNlbGVjdG9yQ2hhbmdlZFdpdGhVbmJpbmQoImltZzpub3QoW2RhdGEtbWNlLW9iamVjdF0sW2RhdGEtbWNlLXBsYWNlaG9sZGVyXSksZmlndXJlLmltYWdlIiwgZS5zZXRBY3RpdmUpLnVuYmluZDsKICAgICAgfQogICAgfSksIG4udWkucmVnaXN0cnkuYWRkTWVudUl0ZW0oImltYWdlIiwgewogICAgICBpY29uOiAiaW1hZ2UiLAogICAgICB0ZXh0OiAiSW1hZ2UuLi4iLAogICAgICBvbkFjdGlvbjogZmUobikub3BlbgogICAgfSksIG4udWkucmVnaXN0cnkuYWRkQ29udGV4dE1lbnUoImltYWdlIiwgewogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShlKSB7CiAgICAgICAgcmV0dXJuIFooZSkgfHwgIklNRyIgPT09IGUubm9kZU5hbWUgJiYgIUUoZSkgPyBbImltYWdlIl0gOiBbXTsKICAgICAgfQogICAgfSksIChyID0gZSkuYWRkQ29tbWFuZCgibWNlSW1hZ2UiLCBmZShyKS5vcGVuKSwgci5hZGRDb21tYW5kKCJtY2VVcGRhdGVJbWFnZSIsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHIudW5kb01hbmFnZXIudHJhbnNhY3QoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBvZShyLCB0KTsKICAgICAgfSk7CiAgICB9KTsKICB9KTsKfSgpOw=="},null]}